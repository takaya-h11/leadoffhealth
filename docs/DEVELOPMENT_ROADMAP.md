# Lead off Health 開発ロードマップ

## 概要
このドキュメントは、Lead off Health予約管理システムの開発全体の流れを示します。

## 完了済み（001-010）: 基本認証機能

### Phase 1: 基盤構築
- ✅ 001: Supabase Project Setup
- ✅ 002: Supabase Client Utilities作成
- ✅ 003: Middleware実装
- ✅ 004: Authentication Schema Setup

### Phase 2: 認証機能
- ✅ 005: ログインページ実装
- ✅ 006: Email確認ハンドラー実装
- ✅ 007: 保護されたダッシュボードページ実装
- ✅ 008: ユーザープロフィール管理機能
- ✅ 009: パスワードリセット機能
- ✅ 010: ナビゲーションとレイアウト改善

## 開発中（011-030）: 主要機能

### Phase 3: ユーザー管理（管理者機能）
- 🔲 011: 法人管理機能（CRUD）
- 🔲 012: 整体師管理機能（CRUD）
- 🔲 013: 法人担当者登録機能
- 🔲 014: ユーザー一覧・検索機能

### Phase 4: マスターデータ管理（管理者機能）
- 🔲 015: 施術メニュー管理
- 🔲 016: 症状マスター管理

### Phase 5: スケジュール・空き枠管理（整体師機能）
- 🔲 017: 空き枠登録機能
- 🔲 018: 空き枠一覧・削除機能
- 🔲 019: カレンダー表示機能（react-big-calendar）

### Phase 6: 予約管理（法人・整体師機能）
- 🔲 020: 予約申込機能（法人担当者）
- 🔲 021: 予約承認・拒否機能（整体師）
- 🔲 022: 予約一覧・検索機能
- 🔲 023: 予約キャンセル機能
- 🔲 024: 予約ステータス管理

### Phase 7: 施術管理（整体師機能）
- 🔲 025: 施術後レポート記入機能
- 🔲 026: 施術履歴一覧・詳細表示
- 🔲 027: 施術記録検索・フィルター機能

### Phase 8: 通知機能
- 🔲 028: メール通知機能（Resend連携）
- 🔲 029: アプリ内通知機能
- 🔲 030: リマインド通知機能

## 今後の開発（031-040）: レポート・請求機能

### Phase 9: レポート機能（管理者機能）
- 🔲 031: 月次健康経営レポート生成
- 🔲 032: レポートPDF出力（@react-pdf/renderer）
- 🔲 033: レポートグラフ表示（Recharts）

### Phase 10: 請求機能（管理者機能）
- 🔲 034: 月次請求書生成
- 🔲 035: 領収書生成
- 🔲 036: 請求書PDF出力

### Phase 11: 自動化・Cron Jobs
- 🔲 037: 空き枠自動削除ジョブ
- 🔲 038: 月次レポート自動生成ジョブ
- 🔲 039: 月次請求書自動生成ジョブ
- 🔲 040: リマインド通知自動送信ジョブ

## 将来機能（041-）

### Phase 12: 機能拡張
- 🔲 041: 空き枠の繰り返し一括登録
- 🔲 042: LINE連携通知
- 🔲 043: CSVエクスポート機能
- 🔲 044: 会計ソフト連携
- 🔲 045: 詳細な分析ダッシュボード
- 🔲 046: カスタマイズ可能なレポート
- 🔲 047: PWA対応

## 開発の優先順位

### 最優先（MVP必須機能）
1. ユーザー管理（法人・整体師）
2. 空き枠管理
3. 予約管理（申込・承認・キャンセル）
4. 施術記録管理
5. 基本的な通知機能

### 高優先（ビジネス価値が高い）
6. 健康経営レポート
7. 請求書生成
8. カレンダー表示

### 中優先（業務効率化）
9. 検索・フィルター機能
10. 自動化ジョブ
11. PDF出力

### 低優先（将来機能）
12. 一括登録
13. LINE連携
14. CSVエクスポート
15. 外部連携

## 開発ガイドライン

### 各フェーズの進め方
1. **ドキュメント確認**: 該当するドキュメント（例: 011）を読む
2. **データベース確認**: 必要なテーブルが存在することを確認
3. **実装**: ドキュメントに従って機能を実装
4. **テスト**: 動作確認とエラーチェック
5. **次へ**: 次のドキュメントに進む

### コーディング規約
- TypeScriptの型安全性を最大限活用
- Server Actionsを使用したフォーム処理
- Row Level Security (RLS)による権限制御
- エラーハンドリングの徹底
- ユーザーフィードバック（成功/エラーメッセージ）

### テスト項目
- 認証・認可の確認
- CRUD操作の動作確認
- エッジケースの処理
- エラーメッセージの表示
- レスポンシブデザインの確認

## 進捗管理

### 完了基準
各ドキュメントの「完了条件」をすべて満たすこと

### レビューポイント
- 機能が要件定義書通りに動作するか
- UIが使いやすいか
- エラーハンドリングが適切か
- セキュリティ要件を満たしているか
- パフォーマンスに問題がないか

## 参考資料
- [要件定義書](../CLAUDE.md)
- [データベース設計](../supabase/migrations/README.md)
- [Supabase URL設定](./SUPABASE_URL_CONFIGURATION.md)
